IMAPAccount gmail
# Address to connect to
Host imap.gmail.com
User ja.nguyen@gmail.com
PassCmd "gpg2 -q --for-your-eyes-only --no-tty -d ~/.authinfo.gpg | awk '/machine imap.gmail.com login ja.nguyen@gmail.com/ {print $NF}'"
# PassCmd "cat ~/.authinfo | awk '/machine imap.gmail.com login ja.nguyen@gmail.com/ {print $NF}'"
Port 993
SSLType IMAPS
AuthMechs LOGIN
SSLVersions SSLv3
CertificateFile /usr/local/etc/openssl/cert.pem
    
IMAPStore gmail-remote
Account gmail

MaildirStore gmail-local
# The trailing "/" is important
Path ~/Mail/gmail/
Inbox ~/Mail/gmail/inbox

Channel gmail-inbox
Master :gmail-remote:
Slave :gmail-local:
Patterns "INBOX" "Arch*"
Create Both
Expunge Both
SyncState *

Channel gmail-trash
Master :gmail-remote:"[Gmail]/Trash"
Slave :gmail-local:trash
Create Both
Expunge Both
SyncState *

Channel gmail-sent
Master :gmail-remote:"[Gmail]/Sent Mail"
Slave :gmail-local:sent
Create Both
Expunge Both
SyncState *

# GROUPS PUT TOGETHER CHANNELS, SO THAT WE CAN INVOKE
# MBSYNC ON A GROUP TO SYNC ALL CHANNELS
#
# FOR INSTANCE: "mbsync gmail" GETS MAIL FROM 
# "gmail-inbox", "gmail-sent", and "gmail-trash"
#
Group gmail
Channel gmail-inbox
Channel gmail-sent
Channel gmail-trash
